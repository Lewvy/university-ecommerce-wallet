// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: wallets.sql

package db

import (
	"context"
)

const createWallet = `-- name: CreateWallet :one
INSERT INTO wallets (
  user_id
) VALUES (
  $1
)
RETURNING user_id, balance, lifetime_spent, lifetime_earned, created_at, updated_at
`

func (q *Queries) CreateWallet(ctx context.Context, userID int32) (Wallet, error) {
	row := q.db.QueryRow(ctx, createWallet, userID)
	var i Wallet
	err := row.Scan(
		&i.UserID,
		&i.Balance,
		&i.LifetimeSpent,
		&i.LifetimeEarned,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const creditWallet = `-- name: CreditWallet :one
UPDATE wallets 
SET 
  balance = balance + $1,
  lifetime_earned = lifetime_earned + $1
WHERE user_id = $2
RETURNING user_id, balance, lifetime_spent, lifetime_earned, created_at, updated_at
`

type CreditWalletParams struct {
	Balance int64
	UserID  int32
}

func (q *Queries) CreditWallet(ctx context.Context, arg CreditWalletParams) (Wallet, error) {
	row := q.db.QueryRow(ctx, creditWallet, arg.Balance, arg.UserID)
	var i Wallet
	err := row.Scan(
		&i.UserID,
		&i.Balance,
		&i.LifetimeSpent,
		&i.LifetimeEarned,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const debitWallet = `-- name: DebitWallet :one
UPDATE wallets 
SET 
  balance = balance - $1,
  lifetime_spent = lifetime_spent + $1
WHERE user_id = $2
RETURNING user_id, balance, lifetime_spent, lifetime_earned, created_at, updated_at
`

type DebitWalletParams struct {
	Balance int64
	UserID  int32
}

func (q *Queries) DebitWallet(ctx context.Context, arg DebitWalletParams) (Wallet, error) {
	row := q.db.QueryRow(ctx, debitWallet, arg.Balance, arg.UserID)
	var i Wallet
	err := row.Scan(
		&i.UserID,
		&i.Balance,
		&i.LifetimeSpent,
		&i.LifetimeEarned,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getBalanceById = `-- name: GetBalanceById :one
SELECT user_id, balance, lifetime_spent, lifetime_earned, created_at, updated_at
FROM wallets
WHERE user_id = $1
`

func (q *Queries) GetBalanceById(ctx context.Context, userID int32) (Wallet, error) {
	row := q.db.QueryRow(ctx, getBalanceById, userID)
	var i Wallet
	err := row.Scan(
		&i.UserID,
		&i.Balance,
		&i.LifetimeSpent,
		&i.LifetimeEarned,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getTransactionByID = `-- name: GetTransactionByID :one
SELECT id, user_id, amount, transaction_status, transaction_type, related_user_id, razorpay_order_id, razorpay_payment_id, metadata, created_at, updated_at
FROM wallet_transactions
WHERE id = $1
`

func (q *Queries) GetTransactionByID(ctx context.Context, id int32) (WalletTransaction, error) {
	row := q.db.QueryRow(ctx, getTransactionByID, id)
	var i WalletTransaction
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.Amount,
		&i.TransactionStatus,
		&i.TransactionType,
		&i.RelatedUserID,
		&i.RazorpayOrderID,
		&i.RazorpayPaymentID,
		&i.Metadata,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getWalletByUserID = `-- name: GetWalletByUserID :one
SELECT user_id, balance, lifetime_spent, lifetime_earned, created_at, updated_at FROM wallets
WHERE user_id = $1
FOR UPDATE
`

func (q *Queries) GetWalletByUserID(ctx context.Context, userID int32) (Wallet, error) {
	row := q.db.QueryRow(ctx, getWalletByUserID, userID)
	var i Wallet
	err := row.Scan(
		&i.UserID,
		&i.Balance,
		&i.LifetimeSpent,
		&i.LifetimeEarned,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
